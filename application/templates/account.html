{% extends 'application_base.html' %}
{% load static %}
{% block content %}

<div class="container dash-board-main-box">
    {% include 'dashboard_side_menu.html' %}

    <span class=" hide-box  d-lg-none"><i class="fa fa-arrow-right"></i></span>
    <span class=" side-box  d-lg-none"><i class="fa fa-arrow-left"></i></span>
    <div class="dashboard-content bgs-lightgrey py-5" id="dashboard-box" >     
        <h1 class="test-bold fs-25 lh-27 cl-grey px-xl-5">My Account
            <span class="edit_icon pl-2">  <i id="edit" class="far fa-edit cursor"></i> </span>
        </h1>
        <div class="section-account pt-4 px-xl-5">
            <form class="row course_form" id="subject3-form1" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-groups col-12 input-file pb-4">
                    {% if request.user.profile_pic %}
                    <img id="file_upload" src="{{ request.user.profile_pic.url}}" alt="your image" class="
                        upload-img" />
                        {% else %}
                        <img id="file_upload" src="{% static 'images/profile-img.png' %}" alt="your image" class="
                        upload-img" />
                        {% endif %}
                    <div class=" input-file-upload px-1 px-sm-4">
                        <span class="upload-label cl-grey fs-15">Upload Profile Image</span>
                        <input type='file' id="image" name="image" onchange="readURL(this);" accept="image/*">
                    </div>
                </div>
                <div class=" form-groups col-sm-6  pb-4 pt-1">
                    <label for="">First Name</label>
                    <input type="text" id="name1" name="first_name" value="{{request.user.first_name}}" class="form-control" readonly="readonly"
                        maxlength="250" required>
                </div>
                <div class=" form-groups col-sm-6  pb-4 pt-1">
                    <label for="">Last Name</label>
                    <input type="text" id="name2" name="last_name" value="{{request.user.last_name}}" class="form-control" readonly="readonly"
                        maxlength="250" required>
                </div>
                <div class="form-groups col-sm-6 pb-4 pt-1">
                    <label for="">Email ID</label>
                    <input type="email" id="email1" name="email" value="{{request.user.email}}" class="form-control"
                        readonly="readonly" maxlength="250" required>
                </div>
                <div class="form-groups col-sm-6 pb-4 pt-1">
                    <label for="">Phone Number</label>
                    <input type="tel" id="mobile1" name="mobile_number" value="{{request.user.mobile_number}}" class="mobile form-control"
                        readonly="readonly" minlength="7" maxlength="15" required>
                </div>
                <div class="form-groups col-sm-6 pb-4 pt-1">
                    <label for="">Class</label>
                    <input type="text" id="class" name="class_name" value="{{request.user.class_name}}" class="form-control" readonly="readonly"
                        maxlength="250" required>
                </div>
                <div class="form-groups col-sm-6 pb-4 pt-1">
                    <label for="">School Name</label>
                    <input type="text" id="schname" name="school_name" value="{{request.user.school_name}}" class="form-control" readonly="readonly"
                        maxlength="250" required>
                </div>
                <div class=" form-groups col-sm-6 pb-4 pt-1">
                    <label for="">City</label>
                    <input type="text" id="city" name="city" value="{{request.user.city}}" class="form-control"
                        readonly="readonly" maxlength="250" required>
                </div>
                <div class=" form-groups col-sm-6 pb-4 pt-1">
                    <label for="">State</label>
                    <input type="text" id="state" name="state" value="{{request.user.state}}" class="form-control"
                        readonly="readonly" maxlength="250" required>
                </div>
                <div class=" form-groups col-sm-6 pb-4 pt-1">
                    <label for="">Country</label>
                    <input type="text" id="country" name="country" value="{{request.user.country}}" class="form-control" readonly="readonly" maxlength="1000" required>
                </div>
                <div class="form-groups col-12  pt-4">
                    <input type="submit" value="Save & Update" class=" mt-1 btn btn-submit acc-btn bgs-black cl-white">
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock content %}

{% block script %}
<script>
    
        $("#id-account").addClass('active');
        $('#id-account').addClass('active');
        $('.btn-submit').hide();
        $('#edit').click(function() {
            $("input").attr("readonly", false);
            $('.btn-submit').show();
        });

        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    $('#file_upload')
                        .attr('src', e.target.result);
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
    {% endblock script %}